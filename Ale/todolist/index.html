<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="todolist rounded">
        <h1 class="text-center">To Do</h1>
        <div id="data-non-routine"></div>
        <a
          href="#"
          class="button-add-data"
          onclick="toggleInputForm('input-non-routine')"
          >[+]</a
        >
        <input type="text" id="input-non-routine" class="hide" />
        <br /><br />
        <div id="data-routine"></div>
        <a
          href="#"
          class="button-add-data"
          onclick="toggleInputForm('input-routine')"
          >[+]</a
        >
        <input type="text" id="input-routine" class="hide" />
      </div>
      <div id="testing"></div>
    </div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>

  <script>
    // javascript variable => var, let, const
    let nonRoutine = [
      "Mengerjakan Tugas",
      "Menyiram Tanaman",
      "Membeli Perlengkapan",
    ];
    let routine = [
      "Minum Air",
      "Belajar",
      "Membereskan Kamar",
      "Memberi Makan Hewan",
    ];

    function printLoopDataNonRoutine(arr, label) {
      let totalNonRoutine = arr.length;

      // print data Non Routine
      let printDataNonRoutine = "<h3>" + label + "</h3>";
      printDataNonRoutine += "<ul class='checklist'>";

      // start loop data array
      for (let i = 0; i < totalNonRoutine; i++) {
        printDataNonRoutine +=
          "<li><input onclick='toggleCheckbox(this)' type='checkbox' name='list' id='list-nr-" +
          i +
          "' /> <label for='list-nr-" +
          i +
          "'>" +
          arr[i] +
          "</label></li>";
      }
      // end loop data array

      printDataNonRoutine += "</ul>";

      return printDataNonRoutine;
    }

    // print output
    let printLoopNonRoutine = printLoopDataNonRoutine(
      nonRoutine,
      "Non-Routine"
    );
    document.querySelector("#data-non-routine").innerHTML = printLoopNonRoutine;

    // Routine
    function printLoopDataRoutine(arr, label) {
      let totalRoutine = arr.length;

      let printDataRoutine = "<h3>" + label + "</h3>";
      printDataRoutine += "<ul class='checklist'>";

      // start looping Routine
      for (let i = 0; i < totalRoutine; i++) {
        printDataRoutine +=
          "<li><input onclick='toggleCheckbox(this)' type='checkbox' name='list' id='list-r-" +
          i +
          "' /> <label for='list-r-" +
          i +
          "'>" +
          arr[i] +
          "</label></li>";
      }
      printDataRoutine += "</ul>";

      return printDataRoutine;
    }

    // print output Routine
    let printLoopRoutine = printLoopDataRoutine(routine, "Routine");
    document.querySelector("#data-routine").innerHTML = printLoopRoutine;

    function toggleCheckbox(checkbox) {
      console.log(checkbox);
      checkbox.nextElementSibling.classList.toggle("checked");
    }

    function toggleInputForm(target) {
      // document.querySelector("#input-routine").classList.toggle("hide");
      document.querySelector("#" + target).classList.toggle("hide");
      document.querySelector("#" + target).value = "";
    }

    function addDataInputNonRoutine(element_input, element_print, arr, label) {
      const inputNonRoutine = document.querySelector("#" + element_input);
      inputNonRoutine.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          console.log("click enter");
          // ambil data dari input
          const dataInputNonRoutine = inputNonRoutine.value;
          arr.push(dataInputNonRoutine);

          // print output
          let printLoopNonRoutine = printLoopDataNonRoutine(arr, label);
          document.querySelector("#" + element_print).innerHTML =
            printLoopNonRoutine;
        }
      });
    }

    addDataInputNonRoutine(
      "input-non-routine",
      "data-non-routine",
      nonRoutine,
      "Non-Routine"
    );
    addDataInputNonRoutine("input-routine", "data-routine", routine, "Routine");
  </script>
</html>
